#!/bin/bash
set -e

# Post-removal script for distiller-migrator

case "$1" in
    purge)
        # Remove state and log directories
        rm -rf /var/lib/distiller-migrator || true
        rm -rf /var/log/distiller-migrator || true

        # Keep backups for safety - admin must remove manually
        if [ -d /var/backups/distiller-migrator ]; then
            echo "Migration backups preserved at /var/backups/distiller-migrator"
            echo "Remove manually if no longer needed"
        fi
        ;;

    remove)
        echo "distiller-migrator removed (state and logs preserved)"
        ;;

    upgrade|failed-upgrade|abort-install|abort-upgrade|disappear)
        ;;

    *)
        echo "postrm called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

#DEBHELPER#

exit 0
